!function(f,P,S){"use strict";var A="ht",w=f[A],v=null,N=Math,o=N.PI,m=N.cos,n=N.sin,g=N.abs,Y=N.max,I=N.sqrt,r=1e-5,i=w.Default,$=i.def,H=i.startAnim,s=i.createMatrix,Z=i.transformVec,L=i.getInternal(),z=L.addMethod,t=L.superCall,F=L.toPointsArray,d=L.createNormals,_=L.toFloatArray,G=L.glMV,X=L.batchShape,U=L.createNodeMatrix,J=L.getFaceInfo,D=L.transformAppend,q=L.drawFaceInfo,T=L.createAnim,k=L.cube(),p=k.is,b=k.vs,E=k.uv,K=L.ui(),W=w.Node,Q=w.Shape,y="h",B="v",O="front",R="back",V="left",l="right",a="top",u="bottom",c="dw.expanded",x=".expanded",j="dw.angle",M=".angle",h=function(P,m,R){$(A+"."+P,m,R)},e=function(x,m,Z){Z?x.push(m.x,m.y):x.push(m.x,m.y,m.z)},C=[1,0,0],bf=function(q,D,w,E){var Q,r,W,K,G=0,Y=[];if(E)for(Q=E.length;Q>G;G+=3)r=E[G],W=E[G+1],K=E[G+2],Y.push(new fr([new de([D[3*r],D[3*r+1],D[3*r+2]],C,w?[w[2*r],w[2*r+1],0]:v),new de([D[3*W],D[3*W+1],D[3*W+2]],C,w?[w[2*W],w[2*W+1],0]:v),new de([D[3*K],D[3*K+1],D[3*K+2]],C,w?[w[2*K],w[2*K+1],0]:v)],q));else for(Q=D.length;Q>G;G+=3)r=G,W=G+1,K=G+2,Y.push(new fr([new de([D[3*r],D[3*r+1],D[3*r+2]],C,w?[w[2*r],w[2*r+1],0]:v),new de([D[3*W],D[3*W+1],D[3*W+2]],C,w?[w[2*W],w[2*W+1],0]:v),new de([D[3*K],D[3*K+1],D[3*K+2]],C,w?[w[2*K],w[2*K+1],0]:v)],q));return Y},eb=[V,O,l,R,a,u],Pb=eb.concat("csg"),sf=[0,6,12,18,24,30],Aj=function(L,X,w){for(var H=U(L),A=[],I=0;6>I;I++)for(var r=eb[I],V=sf[I],z=w?X.getFaceUv(L,r):v,e=w?X.getFaceUvScale(L,r):v,c=w?X.getFaceUvOffset(L,r):v,g=0;2>g;g++){var u,h,n,o=p[V+3*g],P=p[V+3*g+1],Y=p[V+3*g+2];if(w){if(z){var j=8*I;u=[z[2*o-j],z[2*o+1-j],0],h=[z[2*P-j],z[2*P+1-j],0],n=[z[2*Y-j],z[2*Y+1-j],0]}else u=[E[2*o],E[2*o+1],0],h=[E[2*P],E[2*P+1],0],n=[E[2*Y],E[2*Y+1],0];e&&(u[0]*=e[0],u[1]*=e[1],h[0]*=e[0],h[1]*=e[1],n[0]*=e[0],n[1]*=e[1]),c&&(u[0]+=c[0],u[1]+=c[1],h[0]+=c[0],h[1]+=c[1],n[0]+=c[0],n[1]+=c[1])}A.push(new fr([new de(Z([b[3*o],b[3*o+1],b[3*o+2]],H),C,u),new de(Z([b[3*P],b[3*P+1],b[3*P+2]],H),C,h),new de(Z([b[3*Y],b[3*Y+1],b[3*Y+2]],H),C,n)],L))}return Ve.$15n(A)},_r=function(c,n){var R,K=c.data.getAttaches();if(K&&K.each(function(e){e instanceof vn&&e.s("attach.operation")&&(R||(R=[]),R.push(e))}),R){var r;eb.forEach(function(k){var W=bf(k,c[k].vs,c[k].tuv);r=r?r.concat(W):W}),r=Ve.$15n(r),R.forEach(function(t){var A=t.s("attach.operation");r[A]&&(r=r[A](Aj(t,c.gv,c.csg.tuv)))}),eb.forEach(function(i){i=c[i],i.vs=[],i.tuv&&(i.tuv=[])}),r.$19n().forEach(function(i){var p=i.$10n;if(p instanceof vn){if(p.s("attach.cull"))return;p="csg"}for(var E=c[p],R=E.vs,d=E.tuv,h=i.$9n,W=2;W<h.length;W++)e(R,h[0].$24n),e(R,h[W-1].$24n),e(R,h[W].$24n),d&&(e(d,h[0].uv,!0),e(d,h[W-1].uv,!0),e(d,h[W].uv,!0))})}Pb.forEach(function(A){var Z=c[A];Z.visible&&Z.vs.length?(Z.ns=d(Z.vs),_(Z,"vs"),_(Z,"tuv")):delete c[A]}),n&&(X(c,v,n),c.clear())};z(i,{createFrameModel:function(X,$,M,u){X=X==v?.07:X,$=$==v?X:$,M=M==v?X:M,u=u?u:{};var L=u.top,N=u.bottom,c=u.left,F=u.right,o=u.front,O=u.back,K=[],Y=[];return o===!0?(K.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),Y.push(0,0,0,1,1,1,1,1,1,0,0,0)):o===!1||(K.push(-.5,.5,.5,-.5,-.5,.5,-.5+X,-.5,.5,-.5+X,-.5,.5,-.5+X,.5,.5,-.5,.5,.5,.5-X,.5,.5,.5-X,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-X,.5,.5,-.5+X,.5,.5,-.5+X,.5-$,.5,.5-X,.5-$,.5,.5-X,.5-$,.5,.5-X,.5,.5,-.5+X,.5,.5,-.5+X,-.5+$,.5,-.5+X,-.5,.5,.5-X,-.5,.5,.5-X,-.5,.5,.5-X,-.5+$,.5,-.5+X,-.5+$,.5),Y.push(0,0,0,1,X,1,X,1,X,0,0,0,1-X,0,1-X,1,1,1,1,1,1,0,1-X,0,X,0,X,$,1-X,$,1-X,$,1-X,0,X,0,X,1-$,X,1,1-X,1,1-X,1,1-X,1-$,X,1-$)),O===!0?(K.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),Y.push(1,0,0,1,1,1,0,1,1,0,0,0)):O===!1||(K.push(-.5,.5,-.5,-.5+X,-.5,-.5,-.5,-.5,-.5,-.5+X,-.5,-.5,-.5,.5,-.5,-.5+X,.5,-.5,.5-X,.5,-.5,.5,-.5,-.5,.5-X,-.5,-.5,.5,-.5,-.5,.5-X,.5,-.5,.5,.5,-.5,-.5+X,.5,-.5,.5-X,.5-$,-.5,-.5+X,.5-$,-.5,.5-X,.5-$,-.5,-.5+X,.5,-.5,.5-X,.5,-.5,-.5+X,-.5+$,-.5,.5-X,-.5,-.5,-.5+X,-.5,-.5,.5-X,-.5,-.5,-.5+X,-.5+$,-.5,.5-X,-.5+$,-.5),Y.push(1,0,1-X,1,1,1,1-X,1,1,0,1-X,0,X,0,0,1,X,1,0,1,X,0,0,0,1-X,0,X,$,1-X,$,X,$,1-X,0,X,0,1-X,1-$,X,1,1-X,1,X,1,1-X,1-$,X,1-$)),c===!0?(K.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),Y.push(0,0,0,1,1,1,1,1,1,0,0,0)):c===!1||(K.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+M,-.5,-.5,-.5+M,-.5,.5,-.5+M,-.5,.5,-.5,-.5,.5,.5-M,-.5,-.5,.5-M,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-M,-.5,.5,-.5+M,-.5,.5-$,-.5+M,-.5,.5-$,.5-M,-.5,.5-$,.5-M,-.5,.5,.5-M,-.5,.5,-.5+M,-.5,-.5+$,-.5+M,-.5,-.5,-.5+M,-.5,-.5,.5-M,-.5,-.5,.5-M,-.5,-.5+$,.5-M,-.5,-.5+$,-.5+M),Y.push(0,0,0,1,M,1,M,1,M,0,0,0,1-M,0,1-M,1,1,1,1,1,1,0,1-M,0,M,0,M,$,1-M,$,1-M,$,1-M,0,M,0,M,1-$,M,1,1-M,1,1-M,1,1-M,1-$,M,1-$)),F===!0?(K.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),Y.push(1,0,0,1,1,1,0,1,1,0,0,0)):F===!1||(K.push(.5,.5,-.5,.5,-.5,-.5+M,.5,-.5,-.5,.5,-.5,-.5+M,.5,.5,-.5,.5,.5,-.5+M,.5,.5,.5-M,.5,-.5,.5,.5,-.5,.5-M,.5,-.5,.5,.5,.5,.5-M,.5,.5,.5,.5,.5,-.5+M,.5,.5-$,.5-M,.5,.5-$,-.5+M,.5,.5-$,.5-M,.5,.5,-.5+M,.5,.5,.5-M,.5,-.5+$,-.5+M,.5,-.5,.5-M,.5,-.5,-.5+M,.5,-.5,.5-M,.5,-.5+$,-.5+M,.5,-.5+$,.5-M),Y.push(1,0,1-M,1,1,1,1-M,1,1,0,1-M,0,M,0,0,1,M,1,0,1,M,0,0,0,1-M,0,M,$,1-M,$,M,$,1-M,0,M,0,1-M,1-$,M,1,1-M,1,M,1,1-M,1-$,M,1-$)),L===!0?(K.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),Y.push(1,1,1,0,0,0,0,0,0,1,1,1)):L===!1||(K.push(.5,.5,.5,.5,.5,-.5,.5-X,.5,-.5,.5-X,.5,-.5,.5-X,.5,.5,.5,.5,.5,-.5+X,.5,.5,-.5+X,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+X,.5,.5,.5-X,.5,.5,.5-X,.5,.5-M,-.5+X,.5,.5-M,-.5+X,.5,.5-M,-.5+X,.5,.5,.5-X,.5,.5,.5-X,.5,-.5+M,.5-X,.5,-.5,-.5+X,.5,-.5,-.5+X,.5,-.5,-.5+X,.5,-.5+M,.5-X,.5,-.5+M),Y.push(1,1,1,0,1-X,0,1-X,0,1-X,1,1,1,X,1,X,0,0,0,0,0,0,1,X,1,1-X,1,1-X,1-M,X,1-M,X,1-M,X,1,1-X,1,1-X,M,1-X,0,X,0,X,0,X,M,1-X,M)),N===!0?(K.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),Y.push(1,0,0,1,1,1,0,1,1,0,0,0)):N===!1||(K.push(.5,-.5,.5,.5-X,-.5,-.5,.5,-.5,-.5,.5-X,-.5,-.5,.5,-.5,.5,.5-X,-.5,.5,-.5+X,-.5,.5,-.5,-.5,-.5,-.5+X,-.5,-.5,-.5,-.5,-.5,-.5+X,-.5,.5,-.5,-.5,.5,.5-X,-.5,.5,-.5+X,-.5,.5-M,.5-X,-.5,.5-M,-.5+X,-.5,.5-M,.5-X,-.5,.5,-.5+X,-.5,.5,.5-X,-.5,-.5+M,-.5+X,-.5,-.5,.5-X,-.5,-.5,-.5+X,-.5,-.5,.5-X,-.5,-.5+M,-.5+X,-.5,-.5+M),Y.push(1,0,1-X,1,1,1,1-X,1,1,0,1-X,0,X,0,0,1,X,1,0,1,X,0,0,0,1-X,0,X,M,1-X,M,X,M,1-X,0,X,0,1-X,1-M,X,1,1-X,1,X,1,1-X,1-M,X,1-M)),{vs:K,uv:Y}}}),z(w.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":S,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":o/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),eb.forEach(function(f){var n={};n[f+x]=!1,n[f+".toggleable"]=!1,n[f+".axis"]=V,n[f+".start"]=0,n[f+".end"]=o/2,n[f+M]=0,z(w.Style,n,!0)});var Ve=function(){this.$4n=[]};Ve.$15n=function(P){var z=new Ve;return z.$4n=P,z},Ve.prototype={clone:function(){var S=new Ve;return S.$4n=this.$4n.map(function(j){return j.clone()}),S},$19n:function(){return this.$4n},union:function(t){var M=new Nc(this.clone().$4n),E=new Nc(t.clone().$4n);return M.$3n(E),E.$3n(M),E.$6n(),E.$3n(M),E.$6n(),M.$7n(E.$2n()),Ve.$15n(M.$2n())},subtract:function(r){var J=new Nc(this.clone().$4n),X=new Nc(r.clone().$4n);return J.$6n(),J.$3n(X),X.$3n(J),X.$6n(),X.$3n(J),X.$6n(),J.$7n(X.$2n()),J.$6n(),Ve.$15n(J.$2n())},intersect:function(H){var l=new Nc(this.clone().$4n),x=new Nc(H.clone().$4n);return l.$6n(),x.$3n(l),x.$6n(),l.$3n(x),x.$3n(l),l.$7n(x.$2n()),l.$6n(),Ve.$15n(l.$2n())},inverse:function(){var $=this.clone();return $.$4n.map(function(I){I.flip()}),$}},Ve.cube=function(Z){Z=Z||{};var x=new kl(Z.center||[0,0,0]),C=Z.radius?Z.radius.length?Z.radius:[Z.radius,Z.radius,Z.radius]:[1,1,1];return Ve.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(U){return new fr(U[0].map(function(B){var y=new kl(x.x+C[0]*(2*!!(1&B)-1),x.y+C[1]*(2*!!(2&B)-1),x.z+C[2]*(2*!!(4&B)-1));return new de(y,new kl(U[1]))}))}))},Ve.sphere=function(t){function w(O,A){O*=2*o,A*=o;var Q=new kl(m(O)*n(A),m(A),n(O)*n(A));v.push(new de(h.$20n(Q.$21n(V)),Q))}t=t||{};for(var v,h=new kl(t.center||[0,0,0]),V=t.radius||1,k=t.slices||16,R=t.stacks||8,T=[],z=0;k>z;z++)for(var J=0;R>J;J++)v=[],w(z/k,J/R),J>0&&w((z+1)/k,J/R),R-1>J&&w((z+1)/k,(J+1)/R),w(z/k,(J+1)/R),T.push(new fr(v));return Ve.$15n(T)},Ve.cylinder=function(i){function D(D,J,q){var s=2*J*o,y=b.$21n(m(s)).$20n(f.$21n(n(s))),L=R.$20n(V.$21n(D)).$20n(y.$21n(k)),M=y.$21n(1-g(q)).$20n($.$21n(q));return new de(L,M)}i=i||{};for(var R=new kl(i.start||[0,-1,0]),O=new kl(i.end||[0,1,0]),V=O.$13n(R),k=i.radius||1,Y=i.slices||16,$=V.$14n(),_=g($.y)>.5,b=new kl(_,!_,0).$12n($).$14n(),f=b.$12n($).$14n(),p=new de(R,$.$11n()),K=new de(O,$.$14n()),U=[],y=0;Y>y;y++){var r=y/Y,j=(y+1)/Y;U.push(new fr([p,D(0,r,-1),D(0,j,-1)])),U.push(new fr([D(0,j,0),D(0,r,0),D(1,r,0),D(1,j,0)])),U.push(new fr([K,D(1,j,1),D(1,r,1)]))}return Ve.$15n(U)};var kl=function(m,Y,P){var S=this;3==arguments.length?(S.x=m,S.y=Y,S.z=P):"x"in m?(S.x=m.x,S.y=m.y,S.z=m.z):(S.x=m[0],S.y=m[1],S.z=m[2])};kl.prototype={clone:function(){return new kl(this.x,this.y,this.z)},$11n:function(){return new kl(-this.x,-this.y,-this.z)},$20n:function(T){return new kl(this.x+T.x,this.y+T.y,this.z+T.z)},$13n:function(D){return new kl(this.x-D.x,this.y-D.y,this.z-D.z)},$21n:function(q){return new kl(this.x*q,this.y*q,this.z*q)},$16n:function(A){return new kl(this.x/A,this.y/A,this.z/A)},$23n:function(m){return this.x*m.x+this.y*m.y+this.z*m.z},lerp:function(Y,w){return this.$20n(Y.$13n(this).$21n(w))},length:function(){return I(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(O){var _=this;return new kl(_.y*O.z-_.z*O.y,_.z*O.x-_.x*O.z,_.x*O.y-_.y*O.x)}};var de=function(m,g,P){var l=this;l.$24n=new kl(m),l.$22n=new kl(g),l.uv=P?new kl(P):null};de.prototype={clone:function(){var v=this;return new de(v.$24n.clone(),v.$22n.clone(),v.uv?v.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(l,E){var X=this;return new de(X.$24n.lerp(l.$24n,E),X.$22n.lerp(l.$22n,E),X.uv?X.uv.lerp(l.uv,E):null)}};var Hq=function(y,e){this.$22n=y,this.w=e};Hq.$17n=function(q,r,g){var M=r.$13n(q).$12n(g.$13n(q)).$14n();return new Hq(M,M.$23n(q))},Hq.prototype={clone:function(){return new Hq(this.$22n.clone(),this.w)},flip:function(){var j=this;j.$22n=j.$22n.$11n(),j.w=-j.w},$5n:function(W,o,z,S,H){for(var a=this,C=0,A=1,n=2,_=3,G=0,h=[],Q=0;Q<W.$9n.length;Q++){var l=a.$22n.$23n(W.$9n[Q].$24n)-a.w,J=-r>l?n:l>r?A:C;G|=J,h.push(J)}switch(G){case C:(a.$22n.$23n(W.$8n.$22n)>0?o:z).push(W);break;case A:S.push(W);break;case n:H.push(W);break;case _:for(var I=[],M=[],Q=0;Q<W.$9n.length;Q++){var V=(Q+1)%W.$9n.length,K=h[Q],i=h[V],P=W.$9n[Q],L=W.$9n[V];if(K!=n&&I.push(P),K!=A&&M.push(K!=n?P.clone():P),(K|i)==_){var l=(a.w-this.$22n.$23n(P.$24n))/a.$22n.$23n(L.$24n.$13n(P.$24n)),w=P.$18n(L,l);I.push(w),M.push(w.clone())}}I.length>=3&&S.push(new fr(I,W.$10n)),M.length>=3&&H.push(new fr(M,W.$10n))}}};var fr=function(_,U){var Q=this;Q.$9n=_,Q.$10n=U,Q.$8n=Hq.$17n(_[0].$24n,_[1].$24n,_[2].$24n)};fr.prototype={clone:function(){var B=this.$9n.map(function(b){return b.clone()});return new fr(B,this.$10n)},flip:function(){this.$9n.reverse().map(function(i){i.flip()}),this.$8n.flip()}};var Nc=function(b){var C=this;C.$8n=null,C.front=null,C.back=null,C.$4n=[],b&&C.$7n(b)};Nc.prototype={clone:function(){var o=this,d=new Nc;return d.$8n=o.$8n&&o.$8n.clone(),d.front=o.front&&o.front.clone(),d.back=o.back&&o.back.clone(),d.$4n=o.$4n.map(function(O){return O.clone()}),d},$6n:function(){for(var X=this,p=0;p<X.$4n.length;p++)X.$4n[p].flip();X.$8n.flip(),X.front&&X.front.$6n(),X.back&&X.back.$6n();var z=X.front;X.front=X.back,X.back=z},$1n:function(m){var N=this;if(!N.$8n)return m.slice();for(var r=[],Y=[],O=0;O<m.length;O++)N.$8n.$5n(m[O],r,Y,r,Y);return N.front&&(r=N.front.$1n(r)),Y=N.back?N.back.$1n(Y):[],r.concat(Y)},$3n:function(K){var r=this;r.$4n=K.$1n(r.$4n),r.front&&r.front.$3n(K),r.back&&r.back.$3n(K)},$2n:function(){var f=this,g=f.$4n.slice();return f.front&&(g=g.concat(f.front.$2n())),f.back&&(g=g.concat(f.back.$2n())),g},$7n:function(Y){var B=this;if(Y.length){B.$8n||(B.$8n=Y[0].$8n.clone());for(var N=[],W=[],$=0;$<Y.length;$++)this.$8n.$5n(Y[$],B.$4n,B.$4n,N,W);N.length&&(B.front||(B.front=new Nc),this.front.$7n(N)),W.length&&(B.back||(B.back=new Nc),B.back.$7n(W))}}};var Yh="symbol",Qi=w.Symbol=function(w,$,o){var a=this;t(Qi,a),a.s3(20,20,20),a.s({"all.visible":!1,shape:"rect"}),a.setIcon(w,$,o)};h("Symbol",W,{setIcon:function($,h,b){var r,C=this;return Qi.superClass.setIcon.call(C,$),$?(r={for3d:!0,face:"center",position:44,names:[$]},b&&(r.transaprent=!0),h&&(r.autorotate=h),C.addStyleIcon(Yh,r)):C.removeStyleIcon(Yh),C.setWidth(L.getImageWidth(i.getImage($),C)||20),r}});var vn=w.CSGNode=function(){t(vn,this),this.s({shape:"rect","attach.thickness":1.001})},mr={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};h("CSGNode",W,{_22Q:function(){return Oq},onPropertyChanged:function(s){var D=this,v=D.getHost();vn.superClass.onPropertyChanged.call(D,s),mr[s.property]&&(v instanceof kd||v instanceof vn)&&v.fp("csgNodeChange",!0,!1)}});var Oq=function(H,n){t(Oq,this,[H,n])};$(Oq,K.Node3dUI,{_80o:function(v,n,C){var M=this;M._shape3d?Oq.superClass._80o.call(M,v,n,C):(G(M.gv),Pb.forEach(function(y){q(M,v,n,M[y],C)}))},validate:function(C,u){var r=this,W=r.gv,x=r.data;if(x.s("shape3d"))return Oq.superClass.validate.call(r,C,u),r._shape3d=!0,void 0;r._shape3d=!1;var h=U(x,W.getMat(x)),i=C&&C.uv;r.vf2("csg",i);for(var d=0;6>d;d++)for(var k=eb[d],A=sf[d],Z=r.vf2(k,i,u),L=Z.mat||h,e=Z.vs,g=Z.uv,w=Z.tuv,y=0;2>y;y++){var n=p[A+3*y],S=p[A+3*y+1],G=p[A+3*y+2];if(D(e,L,[b[3*n],b[3*n+1],b[3*n+2]]),D(e,L,[b[3*S],b[3*S+1],b[3*S+2]]),D(e,L,[b[3*G],b[3*G+1],b[3*G+2]]),w)if(g){var N=8*d;w.push(g[2*n-N],g[2*n+1-N],g[2*S-N],g[2*S+1-N],g[2*G-N],g[2*G+1-N])}else w.push(E[2*n],E[2*n+1],E[2*S],E[2*S+1],E[2*G],E[2*G+1])}_r(r,C,u)},vf2:function(q,b,n){var Q,H=this,S=H.gv.getFaceVisible(H.data,q);return Q=J(H,q,n),Q.vs=[],Q.tuv=S&&(Q.texture||b)?[]:v,Q.visible=S,Q}});var kd=w.CSGShape=function(){var i=this;t(kd,i),i.s({"shape.background":v,"shape.border.width":8}),i.setTall(240),i.setElevation(120),i.setThickness(14)};h("CSGShape",Q,{IRotatable:!1,_22Q:function(){return Ul},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Ul=function(n,Q){t(Ul,this,[n,Q])};$(Ul,K.Shape3dUI,{_80o:function(h,w,$){var Y=this;Y.undrawable||(G(Y.gv),Pb.forEach(function(v){q(Y,h,w,Y[v],$)}))},validate:function(Z,w){var C=this,D=C.data,i=D.getPoints();if(C.undrawable=i.size()<2)return C.clear(),void 0;var W=D.isClosePath(),J=Y(D._thickness/2,r),g=F(i,v,v,W);Pb.forEach(function(O){C.vf(O,Z&&Z.uv,!0,w)}),W&&(C.left.visible=!1,C.right.visible=!1),C._12O(g,J),C._20Q(g),_r(C,Z,w)}});var am=w.DoorWindow=function(){var F=this;t(am,F),F.setElevation(100),F.s3(100,200,14)};h("DoorWindow",vn,{IDoorWindow:!0,toggle:function(b){this.setExpanded(!this.s(c),b)},isExpanded:function(){return this.s(c)},setExpanded:function(v,Y){var q,l=this,y=l.$25n,z=l.getDataModel(),G=l.s(c);if(z&&(q=z.getHistoryManager()),y&&(y.stop(!0),delete l.$25n),G!==v){q&&q.beginInteraction();var n=v?l.s("dw.end"):l.s("dw.start");l.s(c,v),Y=T(Y),Y?(G=l.s(j),Y.action=function(v){l.s(j,G+(n-G)*v)},Y.finishFunc=function(){q&&q.endInteraction()},l.$25n=H(Y)):(l.s(j,n),q&&q.endInteraction())}},getMat:function(){var n=this,w=n.s("dw.s3"),X=n.s("dw.t3"),p=n.s("dw.flip"),C=n.s(j);if(w||C||X||p){var M=[];if(p&&M.push({r3:[0,o,0]}),w&&M.push({s3:w}),C){w=n.s3();var L=n.s("dw.axis"),b=w[0]/2,U=w[1]/2;w[2]/2,L===V?M.push({t3:[b,0,0]},{r3:[0,-C,0]},{t3:[-b,0,0]}):L===l?M.push({t3:[-b,0,0]},{r3:[0,C,0]},{t3:[b,0,0]}):L===a?M.push({t3:[0,-U,0]},{r3:[-C,0,0]},{t3:[0,U,0]}):L===u?M.push({t3:[0,U,0]},{r3:[C,0,0]},{t3:[0,-U,0]}):L===B?M.push({r3:[0,C,0]}):L===y&&M.push({r3:[C,0,0]})}return X&&M.push({t3:X}),s(M)}return v}});var Er=w.CSGBox=function(){var Y=this;t(Er,Y),Y.setElevation(100),Y.s3(100,200,100)};h("CSGBox",vn,{ICSGBox:!0,toggleFace:function(f,I){this.setFaceExpanded(f,!this.s(f+x),I)},isFaceExpanded:function(E){return this.s(E+x)},setFaceExpanded:function(P,S,C){var y=this,h=y.$25n,q=y.s(P+x);if(h&&(h.stop(!0),delete y.$25n),q!==S){var p=S?y.s(P+".end"):y.s(P+".start");y.s(P+x,S),C=T(C),C?(q=y.s(P+M),C.action=function(h){y.s(P+M,q+(p-q)*h)},y.$25n=H(C)):y.s(P+M,p)}},getFaceMat:function(I){var p=this,G=p.s(I+M);if(!G)return v;var C=p.s(I+".axis"),Y=p.s3(),$=Y[0]/2,z=Y[1]/2,t=Y[2]/2,q=[];return I===O&&(C===V?q.push({t3:[$,0,-t]},{r3:[0,-G,0]},{t3:[-$,0,t]}):C===l?q.push({t3:[-$,0,-t]},{r3:[0,G,0]},{t3:[$,0,t]}):C===a?q.push({t3:[0,-z,-t]},{r3:[-G,0,0]},{t3:[0,z,t]}):C===u?q.push({t3:[0,z,-t]},{r3:[G,0,0]},{t3:[0,-z,t]}):C===B?q.push({t3:[0,0,-t]},{r3:[0,G,0]},{t3:[0,0,t]}):C===y&&q.push({t3:[0,0,-t]},{r3:[G,0,0]},{t3:[0,0,t]})),I===R&&(C===V?q.push({t3:[-$,0,t]},{r3:[0,-G,0]},{t3:[$,0,-t]}):C===l?q.push({t3:[$,0,t]},{r3:[0,G,0]},{t3:[-$,0,-t]}):C===a?q.push({t3:[0,-z,t]},{r3:[G,0,0]},{t3:[0,z,-t]}):C===u?q.push({t3:[0,z,t]},{r3:[-G,0,0]},{t3:[0,-z,-t]}):C===B?q.push({t3:[0,0,t]},{r3:[0,G,0]},{t3:[0,0,-t]}):C===y&&q.push({t3:[0,0,t]},{r3:[G,0,0]},{t3:[0,0,-t]})),I===V&&(C===V?q.push({t3:[$,0,t]},{r3:[0,-G,0]},{t3:[-$,0,-t]}):C===l?q.push({t3:[$,0,-t]},{r3:[0,G,0]},{t3:[-$,0,t]}):C===a?q.push({t3:[$,-z,0]},{r3:[0,0,-G]},{t3:[-$,z,0]}):C===u?q.push({t3:[$,z,0]},{r3:[0,0,G]},{t3:[-$,-z,0]}):C===B?q.push({t3:[$,0,0]},{r3:[0,G,0]},{t3:[-$,0,0]}):C===y&&q.push({t3:[$,0,0]},{r3:[0,0,G]},{t3:[-$,0,0]})),I===l&&(C===V?q.push({t3:[-$,0,-t]},{r3:[0,-G,0]},{t3:[$,0,t]}):C===l?q.push({t3:[-$,0,t]},{r3:[0,G,0]},{t3:[$,0,-t]}):C===a?q.push({t3:[-$,-z,0]},{r3:[0,0,G]},{t3:[$,z,0]}):C===u?q.push({t3:[-$,z,0]},{r3:[0,0,-G]},{t3:[$,-z,0]}):C===B?q.push({t3:[-$,0,0]},{r3:[0,G,0]},{t3:[$,0,0]}):C===y&&q.push({t3:[-$,0,0]},{r3:[0,0,G]},{t3:[$,0,0]})),I===a&&(C===V?q.push({t3:[$,-z,0]},{r3:[0,0,G]},{t3:[-$,z,0]}):C===l?q.push({t3:[-$,-z,0]},{r3:[0,0,-G]},{t3:[$,z,0]}):C===a?q.push({t3:[0,-z,t]},{r3:[-G,0,0]},{t3:[0,z,-t]}):C===u?q.push({t3:[0,-z,-t]},{r3:[G,0,0]},{t3:[0,z,t]}):C===B?q.push({t3:[0,-z,0]},{r3:[0,0,G]},{t3:[0,z,0]}):C===y&&q.push({t3:[0,-z,0]},{r3:[G,0,0]},{t3:[0,z,0]})),I===u&&(C===V?q.push({t3:[$,z,0]},{r3:[0,0,-G]},{t3:[-$,-z,0]}):C===l?q.push({t3:[-$,z,0]},{r3:[0,0,G]},{t3:[$,-z,0]}):C===a?q.push({t3:[0,z,-t]},{r3:[-G,0,0]},{t3:[0,-z,t]}):C===u?q.push({t3:[0,z,t]},{r3:[G,0,0]},{t3:[0,-z,-t]}):C===B?q.push({t3:[0,z,0]},{r3:[0,0,G]},{t3:[0,-z,0]}):C===y&&q.push({t3:[0,z,0]},{r3:[G,0,0]},{t3:[0,-z,0]})),s(q)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);