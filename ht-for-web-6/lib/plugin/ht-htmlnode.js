!function(J){"use strict";var r="ht",j=J[r],g=function(){return document},M=function(){return g().body},d=function(t,O,i){t.style.setProperty(O,i,null)},b=function(o){return g().createElement(o)},K=function(){return b("div")},P=function(){var f=b("canvas");return f},R=function(U,C){d(U,"-webkit-transform",C),d(U,"-ms-transform",C),d(U,"transform",C)},D=function(q,l){d(q,"-webkit-transform-origin",l),d(q,"-ms-transform-origin",l),d(q,"transform-origin",l)},q=function(Y,H){Y.appendChild(H)},s=function(Z,P){Z.removeChild(P)},W=J.parseInt,B=j.Default,Z=B.getInternal(),f=Math.PI,G="white-space",$="visibility",p="left",e="top",Y="width",c="height",E="position",C="display",t="z-index",v="px",T="0 0",O="absolute",l="visible",A="hidden",N="none",F="block",n="nowrap",h="rgba(0, 0, 0, 0.005)";B.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var X=j.graph.GraphView.prototype,w=X._42;X.adjustHtmlNodeIndex=!0,X._42=function(s,q){if(w.call(this,s,q),this.adjustHtmlNodeIndex)for(var c=this.getDataModel()._datas._as,M=c.length,x=1,f=0;M>f;f++){var L=c[f];if(L instanceof H){var $=this.getDataUI(L);d($.$2f,t,x+""),d($.$3f,t,x+1+""),x+=2}}};var U=j.HtmlNodeUI=function(k,h){var R=this;U.superClass.constructor.call(R,k,h);var s=R.$2f=K(),l=R.$3f=P();d(s,E,O),d(s,$,A),d(s,G,n),l.draggable=!1,d(l,E,O),d(l,C,N),D(l,T),s.addEventListener("change",function(K){var l=K.target,s=l.bind||l.getAttribute("bind"),T=l.type&&"checkbox"===l.type?l.checked:l.value,m=h.getContext();s&&m&&(m[s]=T,R.$4f=JSON.stringify(m))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(G){s.addEventListener(G,this.$9f.bind(this))},R)};B.def(U,Z.ui().NodeUI,{_visible:!0,$11f:function(){var $=this,i=$.$3f,X=$._data,o=X.getDraggerImageWidth(),S=X.getDraggerImageHeight(),w=X.getDraggerImage(),k=Z.initContext(i);k.beginPath(),Z.setCanvas(i,o,S),Z.translateAndScale(k,0,0,1),k.clearRect(0,0,o,S),B.drawImage(k,B.getImage(w),0,0,o,S),k.restore()},_80o:function(m){U.superClass._80o.call(this,m);var n=this,H=n._data,s=H._padding,a=2*s,P=n.$2f,z=n.$3f,i=n.gv,T=i.getZoom(),S=i.getTranslateX(),g=i.getTranslateY(),j=i.getView(),M=n._83o,k=H._width,B=H._height,r=M.position,Z=M.rotation,y=(k-a)/H.$5f*T,x=(B-a)/H.$6f*T,G=n._html,Q=H._html,w=H.getHtmlType();if("html"===w){var o=H.getContext()||{},J=n.$4f,u=H.$10f,D=JSON.stringify(o);G&&J&&G===Q&&J===D||(n.$4f=D,n._html=Q,P.innerHTML=u?u(o):Q)}else if(null!=w){var X=H.getHtml();"ht"===w&&(X=X.getView()),G&&G===X&&P.contains(G)||(n._html=X,P.innerHTML="",q(P,X))}if(!P.parentNode){var L=i.$1f;if(!L){var b=K();d(b,E,O),d(b,t,"0"),L=i.$1f=b;var V=i._canvas.nextSibling;V?j.insertBefore(b,V):q(j,b)}q(L,P),q(L,z),H.onContentInitialized&&H.onContentInitialized(P)}if(H._scalable){var _=H.$5f,I=H.$6f;R(P,"rotate("+180*(Z/f)+"deg) scale("+y+","+x+")"),d(P,Y,""),d(P,c,""),d(P,p,(r.x-_/T/2)*T+S+v),d(P,e,(r.y-I/T/2)*T+g+v)}else{var Ak=W(P.style.width),$e=W(P.style.height),Bn=W((k-a)*T),Gq=W((B-a)*T),ek="100%",xg=P.children[0];d(xg,Y,ek),d(xg,c,ek),(Ak!==Bn||$e!==Gq)&&(d(P,Y,Bn+v),d(P,c,Gq+v),"ht"===w&&Q.invalidate()),R(P,"rotate("+180*(Z/f)+"deg)"),d(P,p,(r.x-Bn/T/2)*T+S+v),d(P,e,(r.y-Gq/T/2)*T+g+v)}var Hi=n.dragRect;i.isMovable(H)&&i.isSelected(H)&&Hi?(m.save(),m.fillStyle=h,m.fillRect(Hi.x,Hi.y,Hi.width,Hi.height),m.restore(),d(z,p,Hi.x*T+S+v),d(z,e,Hi.y*T+g+v),R(z,"scale("+T+","+T+")"),d(z,C,F),n.$11f()):d(z,C,N),d(P,$,this._visible?l:A)},dispose:function(){var F=this.gv.$1f;this.$2f.parentNode===F&&F.removeChild(this.$2f),this.$3f.parentNode===F&&F.removeChild(this.$3f)},_84o:function(r){this._visible=r,d(this.$2f,$,r?l:A),d(this.$3f,C,r?F:N)},_3O:function(){var e=this,O=e.gv,X=e._data;U.superClass._3O.call(e);var C=X.getRect();O.isEditable(X)&&(e.dragRect={x:C.x+C.width+X._padding,y:C.y+10,width:X.getDraggerImageWidth(),height:X.getDraggerImageHeight()},e._68o(e.dragRect))},rectIntersects:function(X){var z=this._79o();return j.Default.intersection(z,X)?!0:void 0},$9f:function(d){var q=this.gv,v=this._data;q.sm().contains(v)&&d.stopPropagation()}});var H=j.HtmlNode=function(){H.superClass.constructor.call(this)};j.Default.def(H,j.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:j.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(A){var S=this,k=S._html;S._html=A,"html"===S.getHtmlType()&&"Handlebars"in J&&(S.$10f=Handlebars.compile(A)),S.$13f(),S.fp("html",k,A)},setContext:function(t){var y=this,w=y._context;y._context=t,y.fp("context",w,t),y.$13f()},setScalable:function($){var n=this,N=n._scalable;n._scalable=$,n.fp("scalable",N,$),n.$13f()},getHtmlType:function(){var X=this._html;return X?"string"==typeof X?"html":X.getView?"ht":"dom":null},$13f:function(){var J=this,Q=J._html,j=J.$10f;if(Q){var T=K(),i=!1,L=J.getHtmlType();if(d(T,E,O),d(T,G,n),d(T,$,A),"html"===L?(T.innerHTML=j?j(J.getContext()||{}):Q,i=!0):"ht"===L?(q(T,Q.getView()),i=!0):"dom"===L&&(q(T,Q),i=!0),i){var Y=2*J._padding;q(M(),T),J.$5f=T.scrollWidth,J.$6f=T.scrollHeight,J._width=J.$5f+Y,J._height=J.$6f+Y,J._originWidth=J._width,J._originHeight=J._height,s(M(),T)}}},getUIClass:function(){return j.HtmlNodeUI}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);