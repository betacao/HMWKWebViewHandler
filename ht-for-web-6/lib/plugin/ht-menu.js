!function(i,e){"use strict";var K="ht",s=i[K],n="innerHTML",Q="className",g=null,W="px",u=s.Default,h=u.getInternal(),j="0",U=function(){return document},k=function(X){return U().createElement(X)},X=function(){return k("canvas")},y=function(N,H,K){N.style.setProperty(H,K,g)},q=function(X,F,H){u.def(s.widget[X],F,H)},Z=function(u,t){u.appendChild(t)},_=function(t,G){t.removeChild(G)},Y=function(j,U,C,I){j.addEventListener(U,C,!!I)},r=function(b,V,z,k){b.removeEventListener(V,z,!!k)},B=u.isTouchable;h.addMethod(u,{menuLabelFont:(B?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),s.widget.Menu=function(W){var L=this,n=L._view=h.createView(null,L),R=L.$1g=new s.widget.ContextMenu,G=k("ul");R._r=!0,R._view[Q]+=" ht-widget-dropdownmenu",n[Q]="ht-widget-menu",G[Q]="header",y(n,"margin",j),y(n,"padding",j),y(n,"background",u.menuBackground),y(n,"-webkit-user-select","none"),y(n,"-moz-user-select","none"),y(n,"user-select","none"),y(n,"text-align","left"),y(n,"border-bottom",u.menuSeparatorWidth+"px solid "+u.menuSeparatorColor),y(n,"cursor","default"),y(n,"overflow","auto"),y(n,"white-space","nowrap"),y(n,"font",u.menuLabelFont),y(n,"color",u.menuLabelColor),y(n,"box-sizing","border-box"),y(n,"-moz-box-sizing","border-box"),y(G,"list-style","none"),y(G,"margin",j),y(G,"padding",j),y(G,"display","inline-block"),Z(n,G),L.setItems(W),L.$2g=function(_){L.$3g(_)},L.$4g=function(l){L.$5g(l)},L.$6g=function(O){L.$7g(O)},L.$8g=function(J){L.$9g(J)},L.$9b=function(z){L.$10g(z)},L._autoShow=!0,L.setAutoShow(!1),R.afterHide=function(){L.$11g()},R.afterShow=function(){L.$12g()},r(U(),"keydown",R.$3b),L.$3b=function(Z){L.$13g(Z)},L.invalidate()},q("Menu",e,{_items:g,$14g:u.menuHoverBackground,$15g:u.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(g){var o=this;if(o.$21g=g,o.setItems(o._items),"largeicons"===g){for(var i=o._view.querySelectorAll(".header-item"),R=0,v=0;v<i.length;v++){var n=i[v];R=Math.max(R,n.clientWidth)}for(var v=0;v<i.length;v++){var n=i[v];y(n,"min-width",R+W)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(N){this.$22g=N;for(var S=this._view.querySelectorAll(".header-item"),V=0;V<S.length;V++){var v=S[V];y(v,"margin-left",N+W),y(v,"margin-right",N+W)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(o){this.$23g=o;for(var E=this._view.querySelectorAll(".header-item"),p=0;p<E.length;p++){var k=E[p];y(k,"margin-top",o+W),y(k,"margin-bottom",o+W)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(L){this.$24g=L,y(this._view,"text-align",L)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var p=this,$=p._enableGlobalKey;$===!1&&(Y(U(),"keydown",p.$3b),p._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,r(U(),"keydown",this.$3b)},setHoverBackground:function(s){this.$14g=s},setHoverColor:function(p){this.$15g=p},setItems:function(s){var R=this,F=R._view,E=R.$21g;if(R._items=s,F.children[0][n]="",R.$16g={},s&&s.length){for(var T=F.children[0],m=0,B=U().createDocumentFragment();m<s.length;m++){var L=s[m],W=k("li"),q=k("span");if(L.icon){var J=X();J[Q]="menu-item-icon","smallicons"===E?(y(J,"height","1.2em"),y(J,"width","1.2em"),y(J,"vertical-align","middle")):(y(J,"height","32px"),y(J,"width","32px"),y(J,"display","block"),y(J,"margin","0 auto")),J.$20g=L.icon,Z(W,J)}W[Q]="header-item",y(W,"display","inline-block"),y(W,"vertical-align","top"),y(W,"padding","0 1.2em"),y(W,"line-height","1.8em"),"largeicons"===E&&y(W,"text-align","center"),y(W,"background-color","rgba(0,0,0,0)"),W.setAttribute("data-index",m),R.$16g[m]=L.items,q[n]=L.label,"iconsonly"!==E&&Z(W,q),Z(B,W)}Z(T,B)}},showDropdownMenu:function(Z){var y=this,e=y.$16g[Z],B=y.$1g,t=y._view.children[0].children[Z],J=y.$17g;if(t&&t!==J){J&&y.hideDropdownMenu();var h=t.getBoundingClientRect(),U=u.getWindowInfo();y.$17g=t,B.setItems(e),B.show(h.left+U.left,h.top+h.height+U.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(q,d){var B=this,s=B._items;return s&&0!==s.length?B.$1g.getItemByProperty(q,d,s):g},$12g:function(){var q=this,d=q.$17g;d.style.background=q.$14g,d.style.color=q.$15g,q._autoShow||Y(U(),B?"touchstart":"mousedown",q.$9b)},$11g:function(){var l=this,V=l.$17g;V&&(V.style.background="",V.style.color="",l.$17g=g),r(U(),B?"touchstart":"mousedown",l.$9b)},$10g:function(J){var E=this,p=E._view,d=E.$1g,X=p.children[0];!U().body.contains(p)||X.contains(J.target)||d._view.contains(J.target)||E.hideDropdownMenu()},$13g:function(x){var u=this,Y=u.$1g;U().body.contains(u._view)&&Y.$13b.$4b.call(Y.$13b,x,u._items)},setAutoShow:function(Z){var T=this,d=T.$1g,b=T._view;T._autoShow!==Z&&(T._autoShow?(r(b,"mouseover",T.$2g),r(b,"mouseout",T.$4g),r(d._view,"mouseout",T.$4g),B||(Y(b,"mouseover",T.$8g),Y(b,"mouseout",T.$8g)),Y(b,B?"touchstart":"mousedown",T.$6g)):(r(b,"mouseover",T.$8g),r(b,"mouseout",T.$8g),r(b,B?"touchstart":"mousedown",T.$6g),r(U(),B?"touchstart":"mousedown",T.$9b),B||(Y(b,"mouseover",T.$2g),Y(b,"mouseout",T.$4g),Y(d._view,"mouseout",T.$4g))),T._autoShow=Z)},$3g:function(n){var $=this,v=$._view.children[0],K=n.target;if(v!==K&&v.contains(K)){for(;"header-item"!==K[Q];)K=K.parentNode;$.showDropdownMenu(K.getAttribute("data-index"))}},$5g:function(U){var F=this,o=F._view.children[0],v=F.$1g,O=U.target,z=U.relatedTarget;!o.contains(O)&&!v._view.contains(O)||o.contains(z)||v._view.contains(z)||F.hideDropdownMenu()},$7g:function(g){g.preventDefault();var Y=this,a=Y._view.children[0],j=Y.$1g,c=g.target;if(u.isLeftButton(g)&&a!==c&&a.contains(c))if(B){for(;"header-item"!==c[Q];)c=c.parentNode;var $=c.getAttribute("data-index"),j=Y.$1g,i=Y._view.children[0].children[$],W=Y.$17g;j.isShowing()&&Y.hideDropdownMenu(),i!==W&&Y.showDropdownMenu($)}else if(j.isShowing())Y.hideDropdownMenu();else{for(;"header-item"!==c[Q];)c=c.parentNode;Y.showDropdownMenu(c.getAttribute("data-index"))}},$9g:function(P){var B=this,b=B._view,h=B.$1g,y=P.target;if(b.contains(y)){for(var e=b.querySelectorAll(".header-item"),H=g,m=0;m<e.length;m++){var O=e[m];O.style.background="",O.style.color="","mouseover"===P.type?O.contains(y)&&(H=O):"mouseout"===P.type&&h.isShowing()&&B.$17g===O&&(H=O)}h.isShowing()&&(H||(H=B.$17g),B.showDropdownMenu(H.getAttribute("data-index"))),H&&(H.style.background=B.$14g,H.style.color=B.$15g)}},getShowingMenuIndex:function(){var g=this.$17g;return g?g.getAttribute("data-index"):-1},addTo:function(R){var g=this,Q=g._view;Z(R,Q),g.invalidate()},dispose:function(){var n=this,N=n._view,s=n.$1g;N&&(n._autoShow?(r(N,"mouseover",n.$2g),r(N,"mouseout",n.$4g),r(s._view,"mouseout",n.$4g)):(r(N,"mouseover",n.$8g),r(N,"mouseout",n.$8g),r(N,B?"touchstart":"mousedown",n.$6g),r(U(),B?"touchstart":"mousedown",n.$9b)),r(U(),"keydown",n.$3b),s.dispose(),N.parentNode&&_(N.parentNode,N),n._view=n.$1g=n.$16g=n._items=n.$17g=n.$2g=n.$4g=n.$6g=n.$8g=n.$9b=n.$3b=g)},$19g:function(e,n,m,F){var S=h.initContext(e);h.translateAndScale(S,0,0,1),S.clearRect(0,0,m,F),u.drawStretchImage(S,u.getImage(n),"fill",0,0,m,F),S.restore()},validateImpl:function(){var F,Z,a,y=this,j=y._view,o=j.querySelectorAll(".menu-item-icon");for(a=0;a<o.length;a++){var H=o[a];F=H.clientWidth,Z=H.clientHeight,F&&Z&&(h.setCanvas(H,F,Z),y.$19g(H,u.getImage(H.$20g),F,Z))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);