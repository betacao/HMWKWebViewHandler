!function(l,A){"use strict";var W="ht",v=l[W],L="position",F="absolute",z="px",D="left",P="top",w="innerHTML",s="className",e="width",M="height",n="0",m="display",g="none",r="visibility",i="user-select",y="margin",_="padding",j=null,$=v.Color,B=v.Default,G=B.getInternal(),f=l.setTimeout,Z=l.setInterval,b=l.clearTimeout,k=l.clearInterval,R=l.parseInt,J=B.isLeftButton,T=B.isDragging,X=B.startDragging,u=B.getDistance,Q=B.isTouchable,p=$.widgetIconHighlight,K=$.widgetIconBorder,o=$.widgetIconGradient,q=function(){return document},C=function(q,b){return q.querySelectorAll(b)},O=function(I){var s=q().createElement(I);return"ul"===I&&(h(s,L,"relative"),h(s,y,n),h(s,_,n),h(s,"list-style",g),h(s,"box-sizing","border-box"),h(s,"-moz-box-sizing","border-box"),h(s,m,"inline-block"),h(s,"vertical-align","text-bottom"),h(s,"border","1px solid "+B.contextMenuBorderColor),h(s,"box-shadow","0 0 16px 1px "+B.contextMenuShadowColor),h(s,"overflow","hidden"),B.contextMenuBorderRadius&&h(s,"border-radius",B.contextMenuBorderRadius+z)),s},t=function(A){var b=A.touches[0];return b?b:A.changedTouches[0]},d=function(){return O("div")},x=function(){return O("canvas")},h=function(J,p,u){J.style.setProperty(p,u,j)},N=function(Q,N,w){B.def(v.widget[Q],N,w)},c=function(q,P){q.appendChild(P)},U=function(a,r){a.removeChild(r)},E=function(Y,a,$,h){Y.addEventListener(a,$,!!h)},Y=function($,A,X,b){$.removeEventListener(A,X,!!b)};G.addMethod(B,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:K},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:p}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:K},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:p,gradient:B.imageGradient,gradientColor:o,background:p}]},contextMenuLabelFont:(Q?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var S=function(Z){var H=this,W=Z._view;if(H.$11b=Z,H.addListeners(),E(W,"contextmenu",function(K){K.preventDefault()}),!Q){var b=H.$37b=H.$36b.bind(H);E(W,"mouseover",b),E(W,"mouseout",b)}};B.def(S,A,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(n){if(B.preventDefault(n),J(n)){for(var K=this,j=K.$11b,A=K.getView(),p=A.children,O=0;O<p.length;O++){var S=p[O],y=S.$24b,P=S.$25b;if(y&&y.contains(n.target))return j.scrollUp(S),K.$28b=f(function(){K.$29b=Z(function(){j.scrollUp(S)},100)},500),X(K,n),void 0;if(P&&P.contains(n.target))return j.scrollDown(S),K.$28b=f(function(){K.$29b=Z(function(){j.scrollDown(S)},100)},500),X(K,n),void 0}Q&&(n=t(n)),K.$30b={x:n.pageX,y:n.pageY}}},handle_mousedown:function(J){this.handle_touchstart(J)},handle_touchend:function(X){if(J(X)){var c=this,n=c.$30b,m=Q?{x:t(X).pageX,y:t(X).pageY}:{x:X.pageX,y:X.pageY};if(!n||u(n,m)>1)return delete c.$30b,void 0;for(var z=c.getView(),O=c.$11b,i=X.target,d=j,G=j,s=O._items,M=z.$26b,R=0;R<M.length;R++)if(G=M[R],G.contains(i)){d=G.getAttribute("data-id");break}if(d&&s){var B=O.$17b(s,function(R){return R._id===d});if(B){var C=!1;B.disabled instanceof Function?C=B.disabled.call(O,B):B.disabled===!0&&(C=!0),C||(B.items?Q&&c.$36b(G,!0):O.$1b(B,X))}}delete c.$30b}},$36b:function(j,G){if(!T()){var R,c=this,k=c.$11b,y=c.getView(),d=k.$20b||y.children[0],v=k.$19b,q=y.$26b,w=y.children,l=j.target,H=y.getBoundingClientRect(),M=B.getWindowInfo(),W=M.width,Q=M.height,I=function(W){for(var F=0;F<w.length;F++){var $=w[F],Q=new RegExp(W+"$"),z=$[s];if(z&&(Q.test(z)||z.indexOf(W+" ")>=0))return $}},L=function(I){for(var h=0;h<q.length;h++){var d=q[h],j=new RegExp(I+"$"),v=d[s];if(v&&(j.test(v)||v.indexOf(I+" ")>=0))return d}},E=function(G){var l=L("menu-item"+G.$45b),N=l.getBoundingClientRect(),i=N.top-H.top,V=N.left-H.left;h(G,P,i+z),h(G,D,V+N.width+z);var Y=G.getBoundingClientRect(),C=Y.top,n=Y.left,s=Y.height,t=Y.width,M=C+s+2,m=n+t+2;M>Q&&h(G,P,i+Q-M+z),m>W&&h(G,D,V-t+z)};if(G)R=j;else{if("mouseover"===j.type){for(var N=0;N<q.length;N++){var o=q[N];if(o.contains(l)){R=o;break}}if(!R&&v){var J=v.parentNode,e=I("submenu"+v.getAttribute("data-id"));(e&&e.contains(l)||J&&J.contains(l))&&(R=v)}}else if("mouseout"===j.type){for(var i=!1,_=j.relatedTarget,N=0;N<w.length;N++){var C=w[N];if("hidden"!==C.style.visibility&&C.contains(_)){i=!0;break}}if(i)return}!R&&d&&(R=L("menu-item"+(d.$45b||"NaN")))}if(R!=v){if(v)for(var p=v;p;){p[s]=p[s].replace(" menu-item-hover",""),p[s].indexOf("disabled")<0&&(h(p,"background-color",B.contextMenuBackground),h(p,"color",B.contextMenuLabelColor));var n=I("submenu"+p.getAttribute("data-id"));n&&h(n,r,"hidden");var X=p.parentNode;p=L("menu-item"+(X.$45b||"NaN"))}if(R){for(var Z=R,O=[];Z;){Z[s]+=" menu-item-hover",Z[s].indexOf("disabled")<0&&(h(Z,"background-color",B.contextMenuHoverBackground),h(Z,"color",B.contextMenuHoverLabelColor));var x=I("submenu"+Z.getAttribute("data-id"));x&&(h(x,r,"visible"),O.push(x));var X=Z.parentNode;Z=L("menu-item"+(X.$45b||"NaN"))}O.reverse(),O.forEach(function(G){E(G)})}}k.$19b=R,k.$20b=R?R.parentNode:y.children[0]}},handle_mouseup:function(E){this.handle_touchend(E)},handleWindowTouchEnd:function(){var B=this;B.$28b!=j&&(b(B.$28b),delete B.$28b),B.$29b!=j&&(k(B.$29b),delete B.$29b),delete B.$34b,delete B.$30b,delete B.$35b},handleWindowMouseUp:function(S){this.handleWindowTouchEnd(S)},handle_mousemove:function(U){this.handle_touchmove(U)},handle_touchmove:function(V){if(!T()&&J(V)){for(var m=this,k=m.getView().children,A=j,z=0;z<k.length;z++){var o=k[z];if(o.contains(V.target)){A=o;break}}var W=m.$30b,h=Q?{x:t(V).pageX,y:t(V).pageY}:{x:V.pageX,y:V.pageY};A&&W&&u(W,h)>2&&(X(m,V),m.$34b=A,m.$35b=A.$18b)}},handleWindowTouchMove:function(x){x.preventDefault();var S=this,k=S.$11b,w=S.$34b,a=S.$35b,I=S.$30b;if(I&&w){var q=Q?{x:t(x).pageX,y:t(x).pageY}:{x:x.pageX,y:x.pageY},b=q.y-I.y;b>0?k.scrollUp(w,w.$18b-(a-b)):k.scrollDown(w,a-b-w.$18b)}},handleWindowMouseMove:function(Z){this.handleWindowTouchMove(Z)},$10b:function(k,T){k.preventDefault();for(var E=this,S=E.getView().children,O=j,r=0;r<S.length;r++){var a=S[r];if(a.contains(k.target)){O=a;break}}if(O){var s=this.$11b,e=s.getRowHeight();Math.abs(T)>.05&&(T>0?s.scrollUp(O,T*e):0>T&&s.scrollDown(O,-T*e))}},handle_mousewheel:function(L){this.$10b(L,L.wheelDelta/40)},handle_DOMMouseScroll:function(P){this.$10b(P,-P.detail)},$44b:function(h){this.getView().contains(h.target)||this.$11b.hide()},$41b:function(u){this.$11b.show(u)},$4b:function(o,f){var h=this.$11b;if(f=f||h._items,f&&f.length&&o.keyCode){var d=[o.keyCode];o.shiftKey&&d.push(16),o.ctrlKey&&d.push(17),o.altKey&&d.push(18),/mac/.test(l.navigator?l.navigator.userAgent.toLowerCase():"")?o.metaKey&&d.push(17):o.metaKey&&d.push(91),d.sort();var V=d.join(),X=h.$17b(f,function(T){if(T.key){var f=T.key.slice(0);return f.sort(),V===f.join()}});if(X){X.preventDefault!==!1&&o.preventDefault();var N=!1;X.disabled instanceof Function?N=X.disabled.call(h,X):X.disabled===!0&&(N=!0),N||h.$1b(X,o)}}},$39b:function(K){var q=this,i=t(K);q.$32b={x:i.pageX,y:i.pageY}},$38b:function(w){var s=this,L=t(w);s.$31b={x:L.pageX,y:L.pageY},s.$33b=f(function(){s.$31b&&(s.$32b?u(s.$31b,s.$32b)<10&&s.$11b.show(w):s.$11b.show(w)),delete s.$33b,delete s.$31b,delete s.$32b},600)},$40b:function(){var A=this;A.$33b!=j&&(b(A.$33b),delete A.$33b,delete A.$31b,delete A.$32b)}}),v.widget.ContextMenu=function(q){var X=this,Y=X._view=G.createView(null,X);Y[s]="ht-widget-contextmenu",X.setItems(q),X.$13b=new S(X),h(Y,"font",B.contextMenuLabelFont),h(Y,L,F),h(Y,"cursor","default"),h(Y,"-webkit-"+i,g),h(Y,"-moz-"+i,g),h(Y,"-ms-"+i,g),h(Y,i,g),h(Y,"box-sizing","border-box"),h(Y,"-moz-box-sizing","border-box"),B.baseZIndex!=j&&h(Y,"z-index",R(B.baseZIndex)+2+""),X.$3b=function(Z){X.$13b.$4b(Z)}},N("ContextMenu",A,{$5b:0,_items:j,$21b:j,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var w=this,f=w._enableGlobalKey;f===!1&&(E(q(),"keydown",w.$3b),w._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,Y(q(),"keydown",this.$3b)},setItems:function(n){this._items=n},getItems:function(){return this._items},setVisibleFunc:function(o){this.$16b=o},setLabelMaxWidth:function(w){this.$43b=w},$1b:function(G,f){var M=this;if("check"===G.type)G.selected=!G.selected;else if("radio"===G.type){var j=G.groupId;M.$17b(M._items,function(K){K.groupId===j&&(K.selected=!1)}),G.selected=!0}if(M.hide(),G.action)G.action.apply(G.scope||M,[G,f]);else if(G.href){var d=G.linkTarget||"_self";l.open(G.href,d)}},getItemById:function(p){return this.getItemByProperty("id",p)},setItemVisible:function(c,t){var J=this.getItemById(c);J&&(J.visible=t)},getItemByProperty:function(u,e,J){var s=this;if(J=J||s._items,!J||0===J.length)return j;var c=s.$17b(J,function(y){return y[u]===e});return c||j},scrollUp:function(J,o){var H=this;if(o=o==j?20:o,o=R(o),0!==o){var U=0;J.$18b>o&&(U=J.$18b-o),H.$42b(J,U),J.scrollTop=U,J.$18b=U}},scrollDown:function(F,G){var B=this;if(G=G==j?20:G,G=R(G),0!==G){var W=F.$22b,l=F.$23b,U=W-l;l+F.$18b+G<W&&(U=F.$18b+G),B.$42b(F,U),F.scrollTop=U,F.$18b=U}},$42b:function(n,X){X=X==j?n.$18b:X;var W=n.$24b,C=n.$25b;W&&(h(W,"top",X+z),0==X?h(W,m,g):h(W,m,"block")),C&&(h(C,"bottom",-X+z),X==n.$22b-n.$23b?h(C,m,g):h(C,m,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(w,Q){for(var V=0;V<w.length;V++){var N=w[V];if(Q(N))return N;if(N.items){var b=this.$17b(N.items,Q);if(b)return b}}},$2b:function(D,K){for(var N=this,V=0;V<D.length;V++){N.$5b++;var i=D[V];if(i.visible!==!1&&!(B.isFunction(i.visible)&&i.visible()===!1||N.$16b&&!N.$16b.call(N,i))){var u=O("li"),g=N.$5b+"";if(h(u,"white-space","nowrap"),h(u,m,"block"),"separator"===i||i.separator===!0){var k=d();k[s]="separator",h(k,M,B.contextMenuSeparatorWidth+z),h(k,"background",B.contextMenuSeparatorColor),c(u,k)}else{i._id=g,u.setAttribute("data-id",g);var J=O("span"),X=O("span"),W=x(),E=d();if(h(J,m,"inline-block"),h(X,m,"inline-block"),W[s]="prefix",h(W,m,"inline-block"),h(W,e,"1em"),h(W,M,"1em"),h(W,"vertical-align","middle"),h(W,y,"0 0.2em"),"check"===i.type&&i.selected?W[s]+=" check-prefix":"radio"===i.type&&i.selected&&(W[s]+=" radio-prefix"),c(u,W),i.icon){var C=x();C[s]="contextmenu-item-icon",h(C,m,"inline-block"),h(C,"vertical-align","middle"),h(C,M,"1.2em"),h(C,e,"1.2em"),h(C,"margin-right","0.2em"),C.$50b=i.icon,c(J,C)}if(X[w]=i.label,c(J,X),c(u,J),E[s]="suffix",h(E,m,"inline-block"),h(E,"margin-left","1em"),h(E,"margin-right","0.4em"),h(E,"text-align","right"),h(E,"font-size","75%"),i.items&&(E[w]=B.contextMenuSubmenuMark),i.suffix&&(E[w]=i.suffix),c(u,E),u[s]="menu-item menu-item"+g,h(u,"background-color",B.contextMenuBackground),h(u,"color",B.contextMenuLabelColor),h(u,_,"3px 0"),i.disabled instanceof Function){var P=i.disabled.call(N,i);P&&(u[s]+=" disabled",h(u,"color",B.contextMenuDisabledLabelColor))}else i.disabled&&(u[s]+=" disabled",h(u,"color",B.contextMenuDisabledLabelColor));if(i.items){N.$21b||(N.$21b=new v.List);var b=O("ul");b[s]="submenu"+g,b.$45b=g,h(b,r,"hidden"),h(b,L,F),c(N._view,b),N.$21b.add(b),N.$2b(i.items,b)}}c(K,u)}}},rebuild:function(){var L=this,I=L._items,T=L._view;if(T&&(T[w]="",L.$21b=j,L.$5b=0,L.$19b=j,L.$20b=j,T.$26b=j,I&&0!==I.length)){var Q=O("ul",L._r);c(T,Q),L.$2b(I,Q)}},addTo:function(b){if(b){var U=this,Y=U.$13b;if(U.$12b=b,U.$9b=function(H){Y.$44b(H)},U.$27b=function(F){Y.$41b(F)},Q){var l=U.$6b=function(_){Y.$38b(_)},I=U.$7b=function(G){Y.$39b(G)},J=U.$8b=function(V){Y.$40b(V)};E(b,"touchstart",l,!0),E(b,"touchmove",I),E(b,"touchend",J)}else E(b,"contextmenu",U.$27b)}},showOnView:function(O,H,b){O=O.getView?O.getView():O;var f=B.getWindowInfo(),C=O.getBoundingClientRect();this.show(C.left+f.left+H,C.top+f.top+b)},show:function(K,M,y){var v=this,y=y==j?!0:!1,I=v._view;if(I){if(v.invalidate(),1===arguments.length){var N=K;if(Q){var p=t(N);K=p.pageX,M=p.pageY}else K=N.pageX,M=N.pageY}var R=B.getWindowInfo(),k=R.width,W=R.height,Z=R.left,$=R.top,a={pageX:K,pageY:M,clientX:K-Z,clientY:M-$,target:1,originEvent:N},X=a.clientX,V=a.clientY,H=function(T){T.style.height=W-6+z;var P=d(),o=d(),I=function(M){h(M,L,F),h(M,"text-align","center"),h(M,e,"100%"),h(M,"font-size",10+z),h(M,"padding","2px 0"),h(M,"border","0px solid "+B.contextMenuScrollerBorderColor),h(M,"background-color",B.contextMenuScrollerColor1),M.style.backgroundImage="-webkit-linear-gradient(top, "+B.contextMenuScrollerColor1+", "+B.contextMenuScrollerColor2+")",M.style.backgroundImage="linear-gradient(to bottom, "+B.contextMenuScrollerColor1+", "+B.contextMenuScrollerColor2+")"};P[s]="menu-arrow-item menu-arrow-item-top",o[s]="menu-arrow-item menu-arrow-item-bottom",I(P),h(P,"top",n),h(P,"left",n),h(P,"border-bottom-width",1+z),P[w]="▲",I(o),h(o,"bottom",n),h(o,"left",n),h(o,"border-top-width",1+z),o[w]="▼",T.$24b=P,T.$25b=o,T.$18b=T.scrollTop,T.$22b=T.scrollHeight,T.$23b=T.clientHeight,c(T,P),c(T,o),v.$42b(T)};v.beforeShow&&v.beforeShow(a);var _=v._items;if(_&&(N&&N.preventDefault(),_.length)){v.rebuild(),B.appendToScreen(I),I.$26b=C(I,".menu-item");var U=I.children[0];U.offsetHeight>W&&H(U);var G=V+(y?1:0),u=X+(y?1:0),O=function(L){for(var V=0,Y=0,S=0,c=v.$43b;S<L.children.length;S++){var D=L.children[S];if(D.getAttribute("data-id")){var x=D.children[1],P=D.children[2],R=x.children;if(c){var I=R[0];R.length>1&&(I=R[1]),I.offsetWidth>c&&(I[w]="<marquee scrollamount='3'>"+I[w]+"</marquee>",I.children[0].style.verticalAlign="text-bottom",h(I,e,c+z),h(I,m,"inline-block"))}var t=x.offsetWidth,N=P.offsetWidth;t>V&&(V=t),N>Y&&(Y=N)}}for(S=0;S<L.children.length;S++){var D=L.children[S];if(D.getAttribute("data-id")){var x=D.children[1],P=D.children[2],o=x.children[0],O=x.children[1];!O&&o.style.width&&h(o,e,V+z),h(x,e,V+z),h(P,e,Y+z)}}};O(U);var l=V+3+I.offsetHeight,x=X+3+I.offsetWidth;l>W?h(I,P,G-(l-W)+$+z):h(I,P,G+$+z),x>k?h(I,D,u-(x-k)+Z+z):h(I,D,u+Z+z);var Y=v.$21b;Y&&Y.each(function(g){O(g),g.offsetHeight>W&&H(g)}),v.$9b&&E(q(),Q?"touchstart":"mousedown",v.$9b,!0),v.afterShow&&v.afterShow(a),v.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=j:!1},getRelatedView:function(){return this.$12b},hide:function(){var o=this,e=o._view;e&&e.parentNode&&(U(e.parentNode,e),Y(q(),Q?"touchstart":"mousedown",o.$9b,!0),o.afterHide&&o.afterHide())},dispose:function(){var E=this,p=E.$12b,T=E._view;T&&(T.parentNode&&U(T.parentNode,T),E.disableGlobalKey(),p&&(Q?(Y(p,"touchstart",E.$6b,!0),Y(p,"touchmove",E.$7b),Y(p,"touchend",E.$8b)):Y(p,"contextmenu",E.$27b)),E._view=E._items=E.$21b=E.$19b=E.$12b=E.beforeShow=E.afterShow=E.afterHide=E.$9b=E.$3b=E.$6b=E.$7b=E.$8b=E.$27b=j)},$46b:function(h,_,U,P){var F=G.initContext(h);G.translateAndScale(F,0,0,1),F.clearRect(0,0,U,P),B.drawStretchImage(F,B.getImage(_),"fill",0,0,U,P),F.restore()},$47b:function(){var Q,O,b,U=this,Z=U._view;if(U.isShowing()){var n=C(Z,".check-prefix");for(b=0;b<n.length;b++){var e=n[b];Q=e.clientWidth,O=e.clientHeight,e.$48b=Q,e.$49b=O,G.setCanvas(e,Q,O)}var q=C(Z,".radio-prefix");for(b=0;b<q.length;b++){var h=q[b];Q=h.clientWidth,O=h.clientHeight,h.$48b=Q,h.$49b=O,G.setCanvas(h,Q,O)}var S=C(Z,".contextmenu-item-icon");for(b=0;b<S.length;b++){var o=S[b];Q=o.clientWidth,O=o.clientHeight,o.$48b=Q,o.$49b=O,G.setCanvas(o,Q,O)}}},validateImpl:function(){var h,N,b,V=this,z=V._view;if(V.isShowing()){var H=C(z,".check-prefix");for(b=0;b<H.length;b++){var n=H[b];h=n.$48b,N=n.$49b,h&&N&&V.$46b(n,B.contextMenuCheckIcon,h,N)}var X=C(z,".radio-prefix");for(b=0;b<X.length;b++){var R=X[b];h=R.$48b,N=R.$49b,h&&N&&V.$46b(R,B.contextMenuRadioIcon,h,N)}var q=C(z,".contextmenu-item-icon");for(b=0;b<q.length;b++){var y=q[b];h=y.$48b,N=y.$49b,h&&N&&V.$46b(y,B.getImage(y.$50b),h,N)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);