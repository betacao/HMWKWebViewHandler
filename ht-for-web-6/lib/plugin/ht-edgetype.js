!function(D){"use strict";var w="ht",d=D[w],r=Math,P=r.max,g=r.min,Q=r.abs,c=r.atan2,p=(r.cos,r.sin,r.ceil),X=d.Default,k=X.getInternal(),G=d.List,S=k.Mat,v=k.getNodeRect,U=k.intersectionLineRect,N=X.getDistance,W=X.setEdgeType,J="left",I="right",T="top",y="bottom",F="edge.type",t="edge.gap",i="edge.center",j="edge.extend",x=function(P,w){return v(P,w).width},a=function(Q,X){return v(Q,X).height},H=function(C,P){return k.getEdgeAgentPosition(C,P._40I,P.s("edge.source.position"),P.s("edge.source.offset.x"),P.s("edge.source.offset.y"),P.s("edge.source.anchor.x"),P.s("edge.source.anchor.y"))},s=function(b,_){return k.getEdgeAgentPosition(b,_._41I,_.s("edge.target.position"),_.s("edge.target.offset.x"),_.s("edge.target.offset.y"),_.s("edge.target.anchor.x"),_.s("edge.target.anchor.y"))},z=function(K,y){var x=K.s(F),M=K.getEdgeGroup();if(M){var b=0;if(M.eachSiblingEdge(function(E){y.isVisible(E)&&E.s(F)==x&&b++}),b>1)return K.s(t)*(b-1)/2}return 0},Y=function(W,B){var G=W.s(F),U=W.isLooped();if(!W.getEdgeGroup())return U?W.s(t):0;var V,P=0,E=0,O=0;return W.getEdgeGroup().getSiblings().each(function(L){L.each(function(C){if(C._40I===W._40I&&C.s(F)==G&&B.isVisible(C)){var x=C.s(t);V?(E+=O/2+x/2,O=x):(V=C,O=x),C===W&&(P=E)}})}),U?E-P+O:P-E/2},h=function(u,h){var _=h.s("edge.corner.radius");return X.toRoundedCorner(u,_)};k.addMethod(d.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),W("boundary",function(g,V,d,_){_||(V=-V);var B,z=H(d,g),P=s(d,g),l=v(d,g._40I),W=v(d,g._41I),X=new S(c(P.y-z.y,P.x-z.x)),C=N(z,P),E=z.x,n=z.y;return B=X.tf(0,V),z={x:B.x+E,y:B.y+n},B=X.tf(C,V),P={x:B.x+E,y:B.y+n},B=U(z,P,l),B&&(z={x:B[0],y:B[1]}),B=U(z,P,W),B&&(P={x:B[0],y:B[1]}),{points:new G([z,P])}}),W("ripple",function(j,m,w,e){e||(m=-m);var I=H(w,j),V=s(w,j),F=N(I,V),$=g(j.s("edge.offset"),F/2),Y=j.s("edge.ripple.size"),o=j.s("edge.ripple.length"),J=j.s("edge.ripple.both"),Q=j.s(i),f=j.s("edge.ripple.elevation"),l=new G,R=j.s("edge.ripple.straight")?null:new G,E=new S(c(V.y-I.y,V.x-I.x));e||(f=-f),F-=2*$,o>0&&(Y=p(F/o));var D=F/Y;R&&R.add(1);for(var n=0;Y>n;n++)R&&R.add(3),0===n?l.add({x:$+D*n,y:Q?0:m}):l.add({x:$+D*n,y:m}),l.add({x:$+D*n+D/2,y:f+m}),J&&(f=-f);for(l.add({x:$+F,y:Q?0:m}),n=0;n<l.size();n++){var L=E.tf(l.get(n));L.x+=I.x,L.y+=I.y,l.set(n,L)}return{points:l,segments:R}}),W("h.v",function($,O,J){O=Y($,J);var T=new G,f=$.s(i),e=H(J,$),P=e.x,r=e.y,u=s(J,$),_=u.x,X=u.y,M=0,l=0,m=_-P,w=X-r;return f||(M=x(J,$._40I)/2,l=a(J,$._41I)/2),m>=0&&0>=w?(T.add({x:P+M,y:r+O}),T.add({x:_+O,y:r+O}),T.add({x:_+O,y:X+l})):0>=m&&w>=0?(T.add({x:P-M,y:r+O}),T.add({x:_+O,y:r+O}),T.add({x:_+O,y:X-l})):m>=0&&w>=0?(T.add({x:P+M,y:r+O}),T.add({x:_-O,y:r+O}),T.add({x:_-O,y:X-l})):(T.add({x:P-M,y:r+O}),T.add({x:_-O,y:r+O}),T.add({x:_-O,y:X+l})),h(T,$)}),W("v.h",function(W,S,e){S=Y(W,e);var l=new G,d=W.s(i),p=H(e,W),z=p.x,m=p.y,k=s(e,W),v=k.x,M=k.y,B=0,U=0,I=v-z,Z=M-m;return d||(B=x(e,W._41I)/2,U=a(e,W._40I)/2),I>=0&&0>=Z?(l.add({x:z+S,y:m-U}),l.add({x:z+S,y:M+S}),l.add({x:v-B,y:M+S})):0>=I&&Z>=0?(l.add({x:z+S,y:m+U}),l.add({x:z+S,y:M+S}),l.add({x:v+B,y:M+S})):I>=0&&Z>=0?(l.add({x:z-S,y:m+U}),l.add({x:z-S,y:M+S}),l.add({x:v-B,y:M+S})):(l.add({x:z-S,y:m-U}),l.add({x:z-S,y:M+S}),l.add({x:v+B,y:M+S})),h(l,W)}),W("ortho",function(r,C,m){var f=new G,X=r.s(i),$=r.s("edge.ortho"),T=r._40I,t=r._41I,V=H(m,r),O=V.x,D=V.y,K=s(m,r),N=K.x,P=K.y,n=N-O,u=P-D,B=X?0:x(m,T)/2,A=X?0:a(m,T)/2,c=X?0:x(m,t)/2,d=X?0:a(m,t)/2,q=(n-(B+c)*(n>0?1:-1))*$,p=(u-(A+d)*(u>0?1:-1))*$;return Q(n)<Q(u)?n>=0&&0>=u?(f.add({x:O+C,y:D-A}),f.add({x:O+C,y:D+p+C-A}),f.add({x:N+C,y:D+p+C-A}),f.add({x:N+C,y:P+d})):0>=n&&u>=0?(f.add({x:O+C,y:D+A}),f.add({x:O+C,y:D+p+C+A}),f.add({x:N+C,y:D+p+C+A}),f.add({x:N+C,y:P-d})):n>=0&&u>=0?(f.add({x:O+C,y:D+A}),f.add({x:O+C,y:D+p-C+A}),f.add({x:N+C,y:D+p-C+A}),f.add({x:N+C,y:P-d})):(f.add({x:O+C,y:D-A}),f.add({x:O+C,y:D+p-C-A}),f.add({x:N+C,y:D+p-C-A}),f.add({x:N+C,y:P+d})):n>=0&&0>=u?(f.add({x:O+B,y:D+C}),f.add({x:O+q+C+B,y:D+C}),f.add({x:O+q+C+B,y:P+C}),f.add({x:N-c,y:P+C})):0>=n&&u>=0?(f.add({x:O-B,y:D+C}),f.add({x:O+q+C-B,y:D+C}),f.add({x:O+q+C-B,y:P+C}),f.add({x:N+c,y:P+C})):n>=0&&u>=0?(f.add({x:O+B,y:D+C}),f.add({x:O+q-C+B,y:D+C}),f.add({x:O+q-C+B,y:P+C}),f.add({x:N-c,y:P+C})):(f.add({x:O-B,y:D+C}),f.add({x:O+q-C-B,y:D+C}),f.add({x:O+q-C-B,y:P+C}),f.add({x:N+c,y:P+C})),h(f,r)}),W("flex",function(K,M,o){var c=new G,S=K.s("edge.flex")+z(K,o),l=K.s(i),C=K._40I,n=K._41I,X=H(o,K),P=X.x,j=X.y,q=s(o,K),Y=q.x,T=q.y,U=Y-P,y=T-j,N=l?0:x(o,C)/2,b=l?0:a(o,C)/2,R=l?0:x(o,n)/2,W=l?0:a(o,n)/2,$=U>0?S:-S,u=y>0?S:-S;return Q(U)<Q(y)?U>=0&&0>=y?(c.add({x:P+M,y:j-b}),c.add({x:P+M,y:j+u+M-b}),c.add({x:Y+M,y:T-u+M+W}),c.add({x:Y+M,y:T+W})):0>=U&&y>=0?(c.add({x:P+M,y:j+b}),c.add({x:P+M,y:j+u+M+b}),c.add({x:Y+M,y:T-u+M-W}),c.add({x:Y+M,y:T-W})):U>=0&&y>=0?(c.add({x:P+M,y:j+b}),c.add({x:P+M,y:j+u-M+b}),c.add({x:Y+M,y:T-u-M-W}),c.add({x:Y+M,y:T-W})):(c.add({x:P+M,y:j-b}),c.add({x:P+M,y:j+u-M-b}),c.add({x:Y+M,y:T-u-M+W}),c.add({x:Y+M,y:T+W})):U>=0&&0>=y?(c.add({x:P+N,y:j+M}),c.add({x:P+$+M+N,y:j+M}),c.add({x:Y-$+M-R,y:T+M}),c.add({x:Y-R,y:T+M})):0>=U&&y>=0?(c.add({x:P-N,y:j+M}),c.add({x:P+$+M-N,y:j+M}),c.add({x:Y-$+M+R,y:T+M}),c.add({x:Y+R,y:T+M})):U>=0&&y>=0?(c.add({x:P+N,y:j+M}),c.add({x:P+$-M+N,y:j+M}),c.add({x:Y-$-M-R,y:T+M}),c.add({x:Y-R,y:T+M})):(c.add({x:P-N,y:j+M}),c.add({x:P+$-M-N,y:j+M}),c.add({x:Y-$-M+R,y:T+M}),c.add({x:Y+R,y:T+M})),h(c,K)}),W("extend.east",function(m,o,J){var a=new G,F=m.s(j)+z(m,J),N=m.s(i),T=H(J,m),M=T.x+(N?0:x(J,m._40I)/2),R=T.y,p=s(J,m),d=p.x+(N?0:x(J,m._41I)/2),w=p.y,g=P(M,d)+F;return R>w?(a.add({x:M,y:R+o}),a.add({x:g+o,y:R+o}),a.add({x:g+o,y:w-o}),a.add({x:d,y:w-o})):(a.add({x:M,y:R-o}),a.add({x:g+o,y:R-o}),a.add({x:g+o,y:w+o}),a.add({x:d,y:w+o})),h(a,m)}),W("extend.west",function(L,J,Q){var K=new G,M=L.s(j)+z(L,Q),V=L.s(i),n=H(Q,L),S=n.x-(V?0:x(Q,L._40I)/2),u=n.y,m=s(Q,L),Y=m.x-(V?0:x(Q,L._41I)/2),T=m.y,U=g(S,Y)-M;return u>T?(K.add({x:S,y:u+J}),K.add({x:U-J,y:u+J}),K.add({x:U-J,y:T-J}),K.add({x:Y,y:T-J})):(K.add({x:S,y:u-J}),K.add({x:U-J,y:u-J}),K.add({x:U-J,y:T+J}),K.add({x:Y,y:T+J})),h(K,L)}),W("extend.north",function(U,r,W){var w=new G,O=U.s(j)+z(U,W),B=U.s(i),L=H(W,U),F=L.x,n=L.y-(B?0:a(W,U._40I)/2),y=s(W,U),J=y.x,d=y.y-(B?0:a(W,U._41I)/2),q=g(n,d)-O;return F>J?(w.add({y:n,x:F+r}),w.add({y:q-r,x:F+r}),w.add({y:q-r,x:J-r}),w.add({y:d,x:J-r})):(w.add({y:n,x:F-r}),w.add({y:q-r,x:F-r}),w.add({y:q-r,x:J+r}),w.add({y:d,x:J+r})),h(w,U)}),W("extend.south",function(O,U,I){var Z=new G,Q=O.s(j)+z(O,I),K=O.s(i),q=H(I,O),$=q.x,W=q.y+(K?0:a(I,O._40I)/2),S=s(I,O),p=S.x,x=S.y+(K?0:a(I,O._41I)/2),r=P(W,x)+Q;return $>p?(Z.add({y:W,x:$+U}),Z.add({y:r+U,x:$+U}),Z.add({y:r+U,x:p-U}),Z.add({y:x,x:p-U})):(Z.add({y:W,x:$-U}),Z.add({y:r+U,x:$-U}),Z.add({y:r+U,x:p+U}),Z.add({y:x,x:p+U})),h(Z,O)});var $=function(B,s,i,c,Y){if(c.sort(function(x,E){var z=x.getSourceAgent()===s?x.getTargetAgent():x.getSourceAgent(),R=E.getSourceAgent()===s?E.getTargetAgent():E.getSourceAgent(),G=z.p(),$=R.p();if(i===J||i===I){if(G.y>$.y)return 1;if(G.y<$.y)return-1}else{if(G.x>$.x)return 1;if(G.x<$.x)return-1}return X.sortFunc(x.getId(),E.getId())}),Y){for(var W,x,g,K=B.getSourceAgent(),O=B.getTargetAgent(),H=0;H<c.size();H++){var l=c.get(H);l.getSourceAgent()===K&&l.getTargetAgent()===O||l.getTargetAgent()===K&&l.getSourceAgent()===O?(x||(x=new G),x.add(l,0)):x?(g||(g=new G),g.add(l)):(W||(W=new G),W.add(l))}c.clear(),W&&c.addAll(W),x&&c.addAll(x),g&&c.addAll(g)}var V=c.indexOf(B),f=c.size(),a=B.s(t);return{side:i,index:V,size:f,offset:-a*(f-1)/2+a*V}},E=function(O,D,g,q,I){var k=D.s(F);return $(D,g,q,g.getAgentEdges().toList(function(Q){return O.isVisible(Q)&&Q.s(F)===k}),I)},M=function(w,n){var B=w.getSourceAgent()===n?w.getTargetAgent():w.getSourceAgent(),Y=n.p(),f=B.p(),$=f.x-Y.x,H=f.y-Y.y;return $>0&&Q(H)<=$?I:0>$&&Q(H)<=-$?J:H>0&&Q($)<=H?y:T},C=function(Y,H,U){var C=H.s(F),u=M(H,U);return $(H,U,u,U.getAgentEdges().toList(function(S){return Y.isVisible(S)&&S.s(F)===C&&M(S,U)===u}))},O=function(t,i){var x=t.getSourceAgent()===i,H=x?t.getTargetAgent():t.getSourceAgent(),S=i.p(),g=H.p();return x?S.y>g.y?T:y:S.x<g.x?I:J},_=function(q,U,V){var g=U.s(F),r=O(U,V);return $(U,V,r,V.getAgentEdges().toList(function(s){return q.isVisible(s)&&s.s(F)===g&&O(s,V)===r}),r===I||r===y)},L=function(k,m){var $=k.getSourceAgent()===m,b=$?k.getTargetAgent():k.getSourceAgent(),E=m.p(),t=b.p();return $?E.x<t.x?I:J:E.y>t.y?T:y},K=function(H,V,D){var Q=V.s(F),R=L(V,D);return $(V,D,R,D.getAgentEdges().toList(function(B){return H.isVisible(B)&&B.s(F)===Q&&L(B,D)===R}),R===I||R===y)},Z=function(c,B,O){var n=c.getSourceAgent(),j=c.getTargetAgent(),d=n.getId()>j.getId(),b=d?j:n,D=d?n:j,g=b.p(),v=D.p(),s=O(B,c,b),Q=O(B,c,D),m=c.s(i),f=m?0:x(B,b)/2,L=m?0:x(B,D)/2,V=m?0:a(B,b)/2,q=m?0:a(B,D)/2,$=s.offset,N=Q.offset,u=s.side,K=Q.side,U=new G;return u===T?(U.add({x:g.x+$,y:g.y-V}),U.add({x:g.x+$,y:v.y+N}),K===J?U.add({x:v.x-L,y:v.y+N}):U.add({x:v.x+L,y:v.y+N})):u===y?(U.add({x:g.x+$,y:g.y+V}),U.add({x:g.x+$,y:v.y+N}),K===J?U.add({x:v.x-L,y:v.y+N}):U.add({x:v.x+L,y:v.y+N})):u===J?(U.add({x:g.x-f,y:g.y+$}),U.add({x:v.x+N,y:g.y+$}),K===y?U.add({x:v.x+N,y:v.y+q}):U.add({x:v.x+N,y:v.y-q})):u===I&&(U.add({x:g.x+f,y:g.y+$}),U.add({x:v.x+N,y:g.y+$}),K===y?U.add({x:v.x+N,y:v.y+q}):U.add({x:v.x+N,y:v.y-q})),d&&U.reverse(),h(U,c)};W("ortho2",function(g,H,Q){var m,M,j=g.s(i),u=g.s("edge.ortho"),Z=g.getSourceAgent(),c=g.getTargetAgent(),s=Z.getId()>c.getId(),v=s?c:Z,B=s?Z:c,e=v.p(),X=B.p(),w=C(Q,g,v),F=C(Q,g,B),q=j?0:x(Q,v)/2,p=j?0:a(Q,v)/2,E=j?0:x(Q,B)/2,t=j?0:a(Q,B)/2,L=new G,S=w.offset,P=F.offset,R=w.side;return R===I?(m=X.y>e.y?-S:S,M=e.x+q+(X.x-E-e.x-q)*u,L.add({x:e.x+q,y:e.y+S}),L.add({x:M+m,y:e.y+S}),L.add({x:M+m,y:X.y+P}),L.add({x:X.x-E,y:X.y+P})):R===J?(m=X.y>e.y?-S:S,M=e.x-q-(e.x-q-X.x-E)*u,L.add({x:e.x-q,y:e.y+S}),L.add({x:M-m,y:e.y+S}),L.add({x:M-m,y:X.y+P}),L.add({x:X.x+E,y:X.y+P})):R===y?(m=X.x>e.x?-S:S,M=e.y+p+(X.y-t-e.y-p)*u,L.add({x:e.x+S,y:e.y+p}),L.add({x:e.x+S,y:M+m}),L.add({x:X.x+P,y:M+m}),L.add({x:X.x+P,y:X.y-t})):R===T&&(m=X.x>e.x?-S:S,M=e.y-p-(e.y-p-X.y-t)*u,L.add({x:e.x+S,y:e.y-p}),L.add({x:e.x+S,y:M-m}),L.add({x:X.x+P,y:M-m}),L.add({x:X.x+P,y:X.y+t})),s&&L.reverse(),h(L,g)},!0),W("flex2",function(D,B,f){var e,u=D.getSourceAgent(),Q=D.getTargetAgent(),b=u.getId()>Q.getId(),c=b?Q:u,m=b?u:Q,n=c.p(),K=m.p(),A=C(f,D,c),_=C(f,D,m),L=D.s(i),g=D.s("edge.flex")+(A.size-1)/2*D.s(t),S=L?0:x(f,c)/2,V=L?0:a(f,c)/2,W=L?0:x(f,m)/2,z=L?0:a(f,m)/2,H=new G,s=A.offset,r=_.offset,U=A.side;return U===I?(e=K.y>n.y?-s:s,H.add({x:n.x+S,y:n.y+s}),H.add({x:n.x+S+g+e,y:n.y+s}),H.add({x:K.x-W-g+e,y:K.y+r}),H.add({x:K.x-W,y:K.y+r})):U===J?(e=K.y>n.y?-s:s,H.add({x:n.x-S,y:n.y+s}),H.add({x:n.x-S-g-e,y:n.y+s}),H.add({x:K.x+W+g-e,y:K.y+r}),H.add({x:K.x+W,y:K.y+r})):U===y?(e=K.x>n.x?-s:s,H.add({x:n.x+s,y:n.y+V}),H.add({x:n.x+s,y:n.y+V+g+e}),H.add({x:K.x+r,y:K.y-z-g+e}),H.add({x:K.x+r,y:K.y-z})):U===T&&(e=K.x>n.x?-s:s,H.add({x:n.x+s,y:n.y-V}),H.add({x:n.x+s,y:n.y-V-g-e}),H.add({x:K.x+r,y:K.y+z+g-e}),H.add({x:K.x+r,y:K.y+z})),b&&H.reverse(),h(H,D)},!0),W("extend.north2",function(r,F,A){var u=r.getSourceAgent(),k=r.getTargetAgent(),M=u.getId()>k.getId(),e=M?k:u,I=M?u:k,p=e.p(),w=I.p(),O=E(A,r,e,T),K=E(A,r,I,T,!0),l=r.s(i),y=l?0:a(A,e)/2,d=l?0:a(A,I)/2,U=O.offset,Z=K.offset,n=r.s(j)+(O.size-1)/2*r.s(t),o=g(p.y-y,w.y-d)-n+(p.x<w.x?U:-U),$=new G;return $.add({x:p.x+U,y:p.y-y}),$.add({x:p.x+U,y:o}),$.add({x:w.x+Z,y:o}),$.add({x:w.x+Z,y:w.y-d}),M&&$.reverse(),h($,r)},!0),W("extend.south2",function(H,K,L){var u=H.getSourceAgent(),F=H.getTargetAgent(),g=u.getId()>F.getId(),U=g?F:u,p=g?u:F,k=U.p(),q=p.p(),s=E(L,H,U,y),O=E(L,H,p,y,!0),C=H.s(i),z=C?0:a(L,U)/2,l=C?0:a(L,p)/2,X=s.offset,R=O.offset,e=H.s(j)+(s.size-1)/2*H.s(t),_=P(k.y+z,q.y+l)+e+(k.x>q.x?X:-X),M=new G;return M.add({x:k.x+X,y:k.y+z}),M.add({x:k.x+X,y:_}),M.add({x:q.x+R,y:_}),M.add({x:q.x+R,y:q.y+l}),g&&M.reverse(),h(M,H)},!0),W("extend.west2",function(A,r,Q){var f=A.getSourceAgent(),$=A.getTargetAgent(),W=f.getId()>$.getId(),Z=W?$:f,n=W?f:$,s=Z.p(),J=n.p(),O=E(Q,A,Z,T),c=E(Q,A,n,T,!0),l=A.s(i),I=l?0:x(Q,Z)/2,L=l?0:x(Q,n)/2,X=O.offset,w=c.offset,q=A.s(j)+(O.size-1)/2*A.s(t),C=g(s.x-I,J.x-L)-q+(s.y<J.y?X:-X),D=new G;return D.add({x:s.x-I,y:s.y+X}),D.add({x:C,y:s.y+X}),D.add({x:C,y:J.y+w}),D.add({x:J.x-L,y:J.y+w}),W&&D.reverse(),h(D,A)},!0),W("extend.east2",function(U,e,Z){var V=U.getSourceAgent(),b=U.getTargetAgent(),D=V.getId()>b.getId(),I=D?b:V,u=D?V:b,X=I.p(),a=u.p(),l=E(Z,U,I,T),A=E(Z,U,u,T,!0),J=U.s(i),N=J?0:x(Z,I)/2,p=J?0:x(Z,u)/2,F=l.offset,M=A.offset,s=U.s(j)+(l.size-1)/2*U.s(t),y=P(X.x+N,a.x+p)+s+(X.y>a.y?F:-F),S=new G;return S.add({x:X.x+N,y:X.y+F}),S.add({x:y,y:X.y+F}),S.add({x:y,y:a.y+M}),S.add({x:a.x+p,y:a.y+M}),D&&S.reverse(),h(S,U)},!0),W("v.h2",function(Q,C,p){return Z(Q,p,_)},!0),W("h.v2",function(t,F,x){return Z(t,x,K)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);